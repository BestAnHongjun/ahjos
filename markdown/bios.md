# BIOS程序
[返回首页](../README.md)
## 1.显示一个字符
```asm
AH = 0x0e;
AL = character code;
BH = 0;
BL = color code;
返回值：无
BIOS中断指令：
INT 0x10
```
## 2.磁盘操作
```asm
AH = 0x02;  (读盘)
AH = 0x03;  (写盘)
AH = 0x04;  (校验)
AH = 0x0c;  (寻道)
AL = 处理对象的扇区数;(只能同时处理连续的扇区)
CH = 柱面号 & 0xff;
CL = 扇区号(0-5位) | (柱面号 & 0x300) >> 2;
DH = 磁头号
DL = 驱动器号
ES:BX = 缓冲地址;   (校验及寻道时不使用)
返回值：
FLAGS.CF == 0: 没有错误, AH == 0
FLAGS.CF == 1: 有错误，错误号码存入AH内
BIOS中断指令：
INT 0x13
```
## 3.设置VGA显卡模式
```asm
AH = 0x00;
AL = 模式：(省略了一些不重要的画面模式)
    0x03: 16色字符模式，80x25
    0x12：VGA图形模式，640x480x4位彩色模式，独特的4面存储模式
    0x13: VGA图形模式，320x200x8位彩色模式，调色板模式
    0x6a: 扩展VGA图形模式，800x600x4位彩色模式，独特的4面存储模式（有的显卡不支持）
返回值：无
BIOS中断指令：
INT 0x10
```

## 4.调色板的访问步骤
* 首先再一连串的访问中屏蔽中断（比如CLI）
* 将想要设定的调色板号码写入0x03c8，紧接着，按R、G、B的顺序写入0x03c9。如果还想继续设定下一个调色板，则省略调色板号码，再按照R、G、B的顺序写入0x03c9即可。
* 如果想要读出当前调色板的状态，首先要将调色板的号码写入0x03c7，再从0x03c9读取3次。读出的顺序就是R、G、B。如果要继续读出下一个调色板，同样也是省略调色板号码的设定，按R、G、B的顺序读出。
* 如果最初执行了CLI，那么最后要执行STI。